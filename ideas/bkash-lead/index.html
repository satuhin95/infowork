<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bkash Image Lead Collect animation</title>
  <style>
    /* fallback */

  * {
    padding: 0;
    margin: 0;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
video::-webkit-media-controls {
    display: none;
}
.hidden {
    display: none;
}
.istation_wrapper * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
.istation_wrapper {
    position: relative;
    width: 300px;
    height: 250px;
}
.video_wrapper, .preview_image {
    width: 300px;
    height: 170px;
    position: relative;
}
img#previewImage {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.audio_control {
    position: absolute;
    right: 5px;
    bottom: 10px;
    color: #fff;
    background: #E21A72;
    width: 30px;
    height: 30px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}
video {
    object-fit: fill;
}
img {
    overflow: hidden;
    object-fit: contain;
}
img.footer-btn {
    position: absolute;
    bottom: 5px;
    right: 5px;
}

img.footer-text {
    position: absolute;
    bottom: 5px;
    right: 68px;
}
img.slide-1-button {
    position: absolute;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%);
    cursor: pointer;
}

img.slide-1-header {
    position: absolute;
    bottom: 60px;
    left: 50%;
    transform: translateX(-50%);
}
.upload-btn-wrapper {
    position: relative;
    width: 155px;
    height: 33px;
    top: 20px;
    margin: 0 auto;
}
img.submit-btn {
    width: 130px;
    height: 30px;
    position: relative;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    cursor: pointer;
}
button.submit-btn {
    width: fit-content;
    position: absolute;
    top: 20px;
    left: 0;
    right: 0;
    margin: 0 auto;
    background: #e2136e;
    padding: 5px 30px;
    color: #fff;
    font-size: 18px;
    border: 0;
    border-radius: 10px;
    cursor: pointer;
}

.slide {position: relative;height: 80px;width: 300px;}
img.slide-2-header {
    position: relative;
    display: block;
    margin: 0 auto;
    top: 7px;
}

img.slide-2-button {
    position: relative;
    display: block;
    margin: 0 auto;
    top: 8px;
}
img.preloader {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 23px;
}

.upload-btn-wrapper input[type=file] {
    font-size: 100px;
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
    opacity: 0;
    overflow: hidden;
}
input[type=file]::-webkit-file-upload-button { 
    width: 155px;
    height: 33px;
    cursor: pointer; 
}
:root {
    --animate-duration: 1s;
    --animate-delay: 1s;
    --animate-repeat: 1;
}
.animate__animated {
    -webkit-animation-duration: 1s;
    animation-duration: 1s;
    -webkit-animation-duration: var(--animate-duration);
    animation-duration: var(--animate-duration);
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
}
.animate__animated.animate__infinite {
    -webkit-animation-iteration-count: infinite;
    animation-iteration-count: infinite;
}
@-webkit-keyframes fadeIn {
    0% {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
@keyframes fadeIn {
    0% {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
.animate__fadeIn {
    -webkit-animation-name: fadeIn;
    animation-name: fadeIn;
}
@-webkit-keyframes fadeOut {
    0% {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}
@keyframes fadeOut {
    0% {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}
.animate__fadeOut {
    -webkit-animation-name: fadeOut;
    animation-name: fadeOut;
}


    @font-face {
      font-family: 'Material Icons';
      font-style: normal;
      font-weight: 400;
      src: url("https://fonts.gstatic.com/s/materialicons/v139/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2") format('woff2');
    }

    @font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url("https://fonts.gstatic.com/s/materialicons/v139/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2") format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:20px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}
  </style>
</head>
<body>

<div class="istation_wrapper">
    <form id="ajax-upload" action="https://showcase.infostation.digital/ideas/bkash-lead/lead.php/" method="post" enctype="multipart/form-data">
    <div class="video_wrapper">
      <video class="videoAd" width="300" height="169" autoplay loop muted>
        <source src="video.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <div class="audio_control" data-audio="mute" onclick="myFunction()"><i class="material-icons">volume_off</i></div>
    </div>

    <div class="preview_image hidden">
      <img id="previewImage"/>
    </div>

    <div class="slide">
      <div class="slide-1">
        <img src="slide-1-header.png" class="slide-1-header">
        <div class="upload-btn-wrapper">
          <img class="upload-btn" src="slide-1-button.png">
          
          <input id="ImageFile" type="file" name="image" onchange="loadFile(event)" accept="image/*"/>
        </div>

        <!-- <img class="submit-btn hidden" src="submit.png"> -->
        <button class="submit-btn hidden" type="submit">Submit</button>
        
      </div>
      <div class="slide-2 hidden">
        <img src="slide-2-header.png" class="slide-2-header">
        <img src="slide-2-button.png" class="slide-2-button">
      </div>
      <img src="preloader.gif" class="preloader hidden">
      <img class="footer-text" src="footer-text.png">
      <img class="footer-btn" src="footer-button.png">
    </div>
  </form>
</div>

  <script>

        let videoWrapper = document.querySelector(".video_wrapper");
        let preview_image = document.querySelector(".preview_image");
        let videoAd = document.querySelector(".videoAd");
        let audioControl = document.querySelector(".audio_control");
        let audio = audioControl.getAttribute('data-audio');
        let slide1 = document.querySelector(".slide-1");
        let slide2 = document.querySelector(".slide-2");

        let uploadBtn = document.querySelector(".upload-btn");
        let uploadBtnWrapper = document.querySelector(".upload-btn-wrapper");
        let submitBtn = document.querySelector(".submit-btn");
        let preloader = document.querySelector(".preloader");

        let footerButton = document.querySelector(".footer-btn");



      var loadFile = function(event) {
        var reader = new FileReader();
        add_class(uploadBtn, "hidden");
        remove_class(preloader, "hidden");
        reader.onload = function(){
          add_class(videoWrapper, "hidden");
          remove_class(preview_image, "hidden");
          
          var previewImage = document.querySelector('#previewImage');
          previewImage.src = reader.result;
          add_class(uploadBtnWrapper, "hidden");
          add_class(preloader, "hidden");
          remove_class(submitBtn, "hidden")
        };
          videoAd.muted = true;
          audioControl.setAttribute('data-audio', 'mute');
          
          reader.readAsDataURL(event.target.files[0]);
          
      };


      function myFunction() {
        audioControl = document.querySelector(".audio_control");
        audio = audioControl.getAttribute('data-audio');
        if (audio === "mute") {
          audioControl.innerHTML = '<i class="material-icons">volume_up</i>';
          videoAd.muted = false;
          audioControl.setAttribute('data-audio', 'unmute');
        }

        if (audio === "unmute") {
          audioControl.innerHTML = '<i class="material-icons">volume_off</i>';
          videoAd.muted = true;
          audioControl.setAttribute('data-audio', 'mute');
        }

      }
      

      document.getElementById('ajax-upload').addEventListener("submit", function(e){
        e.preventDefault()
        var form = e.target
        var data = new FormData(form)
        
        var request = new XMLHttpRequest()

        
        request.open(form.method, form.action)
        request.send(data);

        request.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log(request.response);
                    add_class(slide1, "hidden");
                    remove_class(slide2, "hidden");
                }
            };
            console.log(request.responseType);
            console.log(request.response);
      })
        /*add and remove class function*/
        function remove_class(element, classname,newclass='') {
            element.className = element.className.replace(classname, newclass);
        }
        function add_class(element, classname) {
            element.classList ? element.classList.add(classname) : element.className += (' ' + classname);
        }

  </script>
</body>
</html>