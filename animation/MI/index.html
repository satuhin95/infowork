<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="info_wrapper">
        <div class="info_slide_1">
            <div class="info_element_1">
                <img src="img/mobile.png" alt="img"/>
            </div>
            <div class="info_element_2">
                <p  class="count hidden"><span id="battery-level"></span> %</p>
            </div>
            <div class="info_element_2_1">
                <img src="img/light-streak.png" alt="img"/>
            </div>
            <div class="info_element_2_2  ">
                <img src="img/circle.png" alt="img"/>
            </div>

            <div class="info_element_3 hidden showZoomInRight">
                <img src="img/text1.png" alt="img"/>
            </div>
            <div class="info_element_4 showZoomInRight hidden">
                <img src="img/text2.png" alt="img"/>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>


    <script src="script.js"></script>
    <script>
        let info_element_1 = document.querySelector('.info_element_1')
        let info_element_2_1 = document.querySelector('.info_element_2_1')
        let info_element_2_2 = document.querySelector('.info_element_2_2')
        let info_element_3 = document.querySelector('.info_element_3')
        let info_element_4 = document.querySelector('.info_element_4')
        let count = document.querySelector('.count')

        // TweenMax.fromTo(info_element_1, 1, {scale:.5,y:16,x:300}, {scale:1, y:96,  x: -189});
        TweenMax.from(info_element_1, 1, {scale:.5,y:16,x:-100});
        TweenMax.from(info_element_2_1, 1, {y:200},'<=.8');
        TweenMax.from(info_element_2_2, 1, {y:200},'<=.1');

        setTimeout(function(){
            info_element_2_2.classList.add('spin')
            count.classList.remove('hidden')
            getBatteryStatus()
        },2000)


        function getBatteryStatus(){
        if ('getBattery' in navigator) {
        navigator.getBattery().then(function(battery) {
            // Update the battery status when it changes
            function updateBatteryStatus() {

                var fullNum = (battery.level * 100);
                    var nowHum = 0;

                    function engChange(){   
                        if( nowHum < fullNum ){
                            nowHum +=1;
                            var newText = nowHum 
                            if( nowHum <= 9 ){
                                newText =  "0" + nowHum 
                                
                            };
                            
                            document.getElementById('battery-level').textContent = newText;

                            setTimeout(function(){
                                if(fullNum > 50){
                                    info_element_4.classList.remove('hidden') 
                                }else{
                                    info_element_3.classList.remove('hidden')
                                }
                            },2000)
                            
                        }
                    };

                    setInterval( engChange,(2000/fullNum))
            }

            // Initial update
            updateBatteryStatus();

            // Listen for changes in the battery status
            battery.addEventListener('levelchange', updateBatteryStatus);
        });
    } else {
        document.getElementById('battery-level').textContent = 'Not';
    }
}

     

    </script>
</body>
</html>